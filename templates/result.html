{% extends "base.html" %}

{% block title %}Resultado del Env√≠o - Code Sender{% endblock %}

{% block content %}
<h1>Resultado del Env√≠o</h1>

{% if sent_count > 0 %}
<p class="has-text-weight-semibold">
    ¬°Proceso completado!
</p>
<p>
    Se enviaron {{ sent_count }} c√≥digos de {{ total_emails }} emails totales.
</p>

<ul style="list-style: none; margin: 0;">
    {% for code in codes %}
    <li>
        <button
            class="button is-fullwidth is-justify-content-space-between"
            onclick="navigator.clipboard.writeText('{{ code }}')"
        >
            <div class="code-sent p">
                <p class="mb-0">{{ code }}</p>
            </div>
            <p class="mb-0">üìãÔ∏è</p>
        </button>
    </li>
    {% endfor %}
</ul>

<div class="is-flex is-justify-content-center">
    <button
        class="button mt-3 right"
        onclick="copyAllCodes('{% for code in codes %}{{ code }} {% endfor %}')"
    >
        Copiar Todos los C√≥digos
    </button>
</div>
{% endif %}

{% if errors %}
<div class="error">
    <strong>Errores encontrados:</strong>
    <ul>
        {% for error in errors %}
        <li>{{ error }}</li>
        {% endfor %}
    </ul>
</div>
{% endif %}

<div style="margin-top: 30px;">
    <p><strong>Importante:</strong></p>
    <ul>
        <li>Los c√≥digos han sido enviados de forma an√≥nima</li>
        <li>No se ha almacenado la relaci√≥n entre emails y c√≥digos</li>
        <li>Cada c√≥digo es √∫nico y criptogr√°ficamente seguro</li>
    </ul>
</div>

<div style="text-align: center; margin-top: 30px;">
    <a href="/" style="background-color: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">
        Enviar M√°s C√≥digos
    </a>
</div>

<script>
    function copyAllCodes(codes) {
        navigator.clipboard.writeText(codes.split(' ').join('\n'));
    }
</script>
{% endblock %}